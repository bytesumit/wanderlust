<% layout('./layouts/boilerplate.ejs')%>

<style>
  #filters {
    display: flex;
    flex-wrap: wrap;
    margin-top: 2rem;
    align-items: center;
    
   
  }
.filter{
  text-align: center;
  margin-left: 2rem;
  cursor: pointer;
  opacity: 0.7;
  &:hover{
    opacity: 1;
  }
  p{
    font-size: 1rem;
  }
}

.tax-info{
  display: none;
}

.tax-switch{ 
  border: 1px solid black;
  border-radius: 1rem;
  margin-left: 3rem;
 height: 3.5rem;
 padding: 1rem;
 display: flex;
 align-items: center;
 }
  </style>
<body>
  <div id="filters" class="  row-col-sm-1">
    <div class="filter">
      <div class="div"><i class="fa-solid fa-fire"></i></div>
      <p>Trending</p>
    </div>
    <div class="filter">
      <div class="div"><i class="fa-solid fa-mountain-city"></i></div>
      <p>Mountain city</p>
  </div>
  <!-- 3 -->
  <div class="filter">
    <div class="div"><i class="fa-solid fa-mountain"></i></div>
    <p>mountain</p>
  </div>
  <!-- 4 -->
  <div class="filter">
    <div class="div"><i class="fa-solid fa-umbrella-beach"></i></div>
    <p>BeachFront</p>
  </div>
  <!-- 5 -->
  <div class="filter">
    <div class="div"><i class="fa-brands fa-fort-awesome"></i></div>
    <p>Mansion</p>
  </div>
  <!-- 6 -->
  <div class="filter">
    <div class="div"><i class="fa-regular fa-snowflake"></i></div>
    <p>Artic</p>
  </div>
  <!-- 7 -->
  <div class="filter">
    <div class="div"><i class="fa-solid fa-bread-slice"></i></i></div>
    <p>Bed & breakfast</p>
  </div>
  <!-- 8 -->
  <div class="filter">
    <div class="div"><i class="fa-solid fa-tower-observation"></i></div>
    <p>Towers</p>
  </div>
  <!-- 9 -->
  <div class="filter">
    <div class="div"><i class="fa-solid fa-water"></i></div>
    <p>Lake</p>
  </div>
  <!-- 10 -->
  <div class="filter">
    <div class="div"><i class="fa-solid fa-tree"></i></div>
    <p>Tree House</p>
  </div>

  <div class="tax-switch">
    <div class="form-check-reverse form-switch">
      <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
      <label class="form-check-label" for="flexSwitchCheckDefault">Display After Taxes</label>
    </div>
  </div>
</div>
     <div class="row row-cols-lg-3 row-cols-md-2 row-col-sm-1 mt-2">
        <% for(listing of allListings){%>
            <div class="card listingcard" style="width: 20rem;">
                <img style="height: 20rem;" src="<%= listing.image.url %>" class="card-img-top" alt="<%= listing.image.filename %>">
                <div class="card-body">
                  <h5 class="card-title"><%= listing.title %></h5>
                  <p class="card-title"><%= listing.price ? listing.price.toLocaleString("en-IN") : "Price not available" %> /Night 
                  <i class="tax-info"> &nbsp; +18% gst</i></p>
                  <p class="card-text"><%= listing.description %></p>
                  <a href="/listing/<%=listing._id %>" class="btn btn-primary">See in detail</a>
                </div>
              </div>
              <% } %>
     </div>
    <script>
      let taxSwitch = document.getElementById('flexSwitchCheckDefault');
      taxSwitch.addEventListener('change',()=>{
      let taxInfo = document.querySelectorAll('.tax-info');
      taxInfo.forEach((tax)=>{
        tax.style.display = tax.style.display != 'inline' ? 'inline' : 'none';
      })
      })
    
    </script>
</body>
